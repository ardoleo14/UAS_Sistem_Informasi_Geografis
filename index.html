<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<title>WebGIS Kesesuaian Lahan Permukiman Kabupaten Sidoarjo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/leaflet.css">

<style>
html, body, #map {
    height: 100%;
    margin: 0;
    padding: 0;
}
.header {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 8px 16px;
    z-index: 2000;
    font-weight: bold;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,.3);
}
</style>
</head>

<body>

<div class="header">
WebGIS Kesesuaian Lahan Permukiman Kabupaten Sidoarjo
</div>

<div id="map"></div>

<script src="js/leaflet.js"></script>

<!-- ================= DATA ================= -->
<script src="data/Kesesuaian_Permukiman_DISSOLVE_1.js"></script>
<script src="data/Buffered_500M_Pendidikan_Sidoarjo_2.js"></script>
<script src="data/Pendidikan_Sisoarjo_3.js"></script>
<script src="data/Permukiman_Sidoarjo_4.js"></script>
<script src="data/Buffered_200M_Sidoarjo_RAWAN_Rendah_5.js"></script>
<script src="data/Buffered_100M_Sidoarjo_RAWAN_Sedang_6.js"></script>
<script src="data/Buffered_50M_Sidoarjo_RAWAN_Tinggi_7.js"></script>
<script src="data/Sungai_8.js"></script>
<script src="data/Garis_Pantai_Sidoarjo_9.js"></script>
<script src="data/WADUK_Sidoarjo_10.js"></script>
<script src="data/RumahSakit_sidoarjo_11.js"></script>
<script src="data/Terminal_sidoarjo_12.js"></script>
<script src="data/industrial_sidoarjo_13.js"></script>
<script src="data/Stasiun_sidoarjo_14.js"></script>
<script src="data/SaranaIbadah_sidoarjo_15.js"></script>
<script src="data/Pasar_PusatPerdagangan_sidoarjo_16.js"></script>

<script>
// ================= MAP =================
var map = L.map('map').setView([-7.445, 112.720], 11);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap'
}).addTo(map);

// ================= STYLE =================
function polyStyle(color){
    return {
        color: '#333',
        weight: 1,
        fillColor: color,
        fillOpacity: 0.75
    };
}

function pointStyle(color){
    return {
        radius: 5,
        fillColor: color,
        color: '#000',
        weight: 1,
        opacity: 1,
        fillOpacity: 1
    };
}

// ================= POLYGON LAYERS =================
var kesesuaian = L.geoJSON(json_Kesesuaian_Permukiman_DISSOLVE_1,{
    style: polyStyle('#b7484b')
}).addTo(map);

var permukiman = L.geoJSON(json_Permukiman_Sidoarjo_4,{
    style: polyStyle('#a47158')
});

var bufferPendidikan = L.geoJSON(json_Buffered_500M_Pendidikan_Sidoarjo_2,{
    style: polyStyle('#ff9e17')
});

var rawanRendah = L.geoJSON(json_Buffered_200M_Sidoarjo_RAWAN_Rendah_5,{
    style: polyStyle('#f4ff4b')
});

var rawanSedang = L.geoJSON(json_Buffered_100M_Sidoarjo_RAWAN_Sedang_6,{
    style: polyStyle('#ff9a00')
});

var rawanTinggi = L.geoJSON(json_Buffered_50M_Sidoarjo_RAWAN_Tinggi_7,{
    style: polyStyle('#e31a1c')
});

var waduk = L.geoJSON(json_WADUK_Sidoarjo_10,{
    style: polyStyle('#4ade80')
});

var sungai = L.geoJSON(json_Sungai_8,{
    style:{ color:'#2563eb', weight:2 }
});

var pantai = L.geoJSON(json_Garis_Pantai_Sidoarjo_9,{
    style:{ color:'#16a34a', weight:2 }
});

// ================= POINT LAYERS (Z-INDEX TINGGI) =================
var pendidikan = L.geoJSON(json_Pendidikan_Sisoarjo_3,{
    pointToLayer:(f,latlng)=>L.circleMarker(latlng, pointStyle('#7c3aed'))
}).addTo(map);

var rumahSakit = L.geoJSON(json_RumahSakit_sidoarjo_11,{
    pointToLayer:(f,latlng)=>L.circleMarker(latlng, pointStyle('#dc2626'))
}).addTo(map);

var terminal = L.geoJSON(json_Terminal_sidoarjo_12,{
    pointToLayer:(f,latlng)=>L.circleMarker(latlng, pointStyle('#475569'))
}).addTo(map);

var stasiun = L.geoJSON(json_Stasiun_sidoarjo_14,{
    pointToLayer:(f,latlng)=>L.circleMarker(latlng, pointStyle('#f97316'))
}).addTo(map);

var ibadah = L.geoJSON(json_SaranaIbadah_sidoarjo_15,{
    pointToLayer:(f,latlng)=>L.circleMarker(latlng, pointStyle('#0f766e'))
}).addTo(map);

var pasar = L.geoJSON(json_Pasar_PusatPerdagangan_sidoarjo_16,{
    pointToLayer:(f,latlng)=>L.circleMarker(latlng, pointStyle('#eab308'))
}).addTo(map);

// pastikan point selalu di atas
pendidikan.bringToFront();
rumahSakit.bringToFront();
terminal.bringToFront();
stasiun.bringToFront();
ibadah.bringToFront();
pasar.bringToFront();

// ================= LAYER CONTROL =================
var overlays = {
    "Kesesuaian Permukiman": kesesuaian,
    "Permukiman": permukiman,
    "Buffer Pendidikan 500 m": bufferPendidikan,
    "Rawan Banjir Rendah": rawanRendah,
    "Rawan Banjir Sedang": rawanSedang,
    "Rawan Banjir Tinggi": rawanTinggi,
    "Waduk": waduk,
    "Sungai": sungai,
    "Garis Pantai": pantai,
    "Pendidikan": pendidikan,
    "Rumah Sakit": rumahSakit,
    "Terminal": terminal,
    "Stasiun": stasiun,
    "Sarana Ibadah": ibadah,
    "Pasar": pasar
};

L.control.layers(null, overlays, {collapsed:false}).addTo(map);
</script>

</body>
</html>
